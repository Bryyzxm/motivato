<!DOCTYPE html>
<html
  lang="en"
  class="scroll-smooth"
>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />

    <!-- Tambahkan ini untuk memastikan dark mode berfungsi -->
    <script>
      // On page load or when changing themes, best to add inline in `head` to avoid FOUC
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    </script>

    <!-- google fonts -->
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;900&display=swap"
      rel="stylesheet"
    />

    <link
      href="./output.css"
      rel="stylesheet"
    />

    <!-- feather icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <title>Motivato</title>
  </head>
  <body class="bg-white dark:bg-gray-900 font-poppins transition-all duration-200">
    <nav class="bg-white border-gray-200 dark:bg-gray-900 relative drop-shadow-sm dark:lg:drop-shadow-lg">
      <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
        <a
          href="#"
          class="flex items-center space-x-3 rtl:space-x-reverse"
        >
          <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Motivato</span>
        </a>
        <div class="relative flex items-center md:order-2 space-x-1 md:space-x-0 rtl:space-x-reverse">
          <!-- Language Selector Button -->
          <div class="relative inline-block text-left">
            <button
              id="language-selector"
              type="button"
              class="inline-flex items-center font-medium justify-center px-4 py-2 text-sm text-gray-900 dark:text-white rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"
            >
              <!-- Default Flag (Indonesia) -->
              <svg
                id="selected-lang-icon"
                class="w-5 h-5 rounded-full me-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
              >
                <path
                  fill="#fff"
                  d="M0 0h512v512H0z"
                />
                <path
                  fill="#f00"
                  d="M0 0h512v256H0z"
                />
              </svg>
              <span id="selected-lang-text">Bahasa Indonesia</span>
            </button>

            <!-- Language Dropdown -->
            <div
              id="language-menu"
              class="hidden absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-md dark:bg-gray-800 dark:border-gray-700 z-50"
              style="pointer-events: auto"
            >
              <ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
                <li>
                  <button
                    type="button"
                    class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"
                    data-lang="id"
                  >
                    <div class="inline-flex items-center">
                      <svg
                        class="h-3.5 w-3.5 rounded-full me-2"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                      >
                        <path
                          fill="#fff"
                          d="M0 0h512v512H0z"
                        />
                        <path
                          fill="#f00"
                          d="M0 0h512v256H0z"
                        />
                      </svg>
                      Bahasa Indonesia
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    type="button"
                    class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 dark:hover:text-white"
                    data-lang="en"
                  >
                    <div class="inline-flex items-center">
                      <svg
                        aria-hidden="true"
                        class="h-3.5 w-3.5 rounded-full me-2"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                      >
                        <g fill-rule="evenodd">
                          <g stroke-width="1pt">
                            <path
                              fill="#bd3d44"
                              d="M0 0h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0z"
                              transform="scale(3.9385)"
                            />
                            <path
                              fill="#fff"
                              d="M0 10h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0z"
                              transform="scale(3.9385)"
                            />
                          </g>
                          <path
                            fill="#192f5d"
                            d="M0 0h98.8v70H0z"
                            transform="scale(3.9385)"
                          />
                          <path
                            fill="#fff"
                            d="M8.2 3l1 2.8H12L9.7 7.5l.9 2.7-2.4-1.7L6 10.2l.9-2.7-2.4-1.7h3zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.5 0l.9 2.8H45l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.4 0l1 2.8h2.8l-2.3 1.7.9 2.7-2.4-1.7-2.3 1.7.9-2.7-2.4-1.7h3zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.4 0l1 2.8H86l-2.3 1.7.9 2.7-2.4-1.7-2.3 1.7.9-2.7-2.4-1.7h3z"
                            transform="scale(3.9385)"
                          />
                        </g>
                      </svg>
                      English (US)
                    </div>
                  </button>
                </li>
              </ul>
            </div>
          </div>
          <button
            id="hamburger-menu"
            data-collapse-toggle="navbar-language"
            type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
            aria-controls="navbar-language"
            aria-expanded="false"
          >
            <span class="sr-only">Open main menu</span>
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
          </button>
        </div>
        <div
          class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1"
          id="navbar-language"
        >
          <ul
            class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:space-x-2 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700"
          >
            <li>
              <a
                href="#"
                class="block py-2 px-3 text-white bg-primary rounded-sm md:bg-transparent md:text-primary md:dark:text-primary"
                aria-current="page"
                >Beranda</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
                >Komunitas</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block py-2 px-3 text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:hover:text-blue-700 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"
                >Notifikasi</a
              >
            </li>

            <li class="flex items-center space-x-2">
              <!-- Dark Mode Toggle Button -->
              <button
                id="theme-toggle"
                type="button"
                class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
              >
                <svg
                  id="theme-toggle-dark-icon"
                  class="hidden w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/svg"
                >
                  <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
                <svg
                  id="theme-toggle-light-icon"
                  class="hidden w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 0 0 8 0zm-.464 4.95l.707.707a1 1 0 0 1-1.414-1.414l-.707-.707a1 1 0 0 0-1.414 1.414zm2.12-10.607a1 1 0 0 1 0 1.414l-.706.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </button>

              <!-- Instagram Link Button -->
              <a
                href="https://www.instagram.com/bryan.developer"
                target="_blank"
                rel="noopener noreferrer"
                class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center justify-center"
              >
                <svg
                  class="w-5 h-5 text-gray-800 dark:text-white"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="currentColor"
                    fill-rule="evenodd"
                    d="M3 8a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v8a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8Zm5-3a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H8Zm7.597 2.214a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2h-.01a1 1 0 0 1-1-1ZM12 9a3 3 0 1 0 0 6 3 3 0 0 0 0-6Zm-5 3a5 5 0 1 1 10 0 5 5 0 0 1-10 0Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">Instagram</span>
              </a>

              <!-- tiktok -->
              <a
                href="https://www.tiktok.com/@bryan.developer"
                target="_blank"
                rel="noopener noreferrer"
                class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5 inline-flex items-center justify-center"
              >
                <svg
                  class="w-5 h-5 text-gray-800 dark:text-white fill-current"
                  height="512pt"
                  viewBox="-32 0 512 512"
                  width="512pt"
                  xmlns="http://www.w3.org/2000/svg"
                  id="fi_1946552"
                >
                  <path
                    d="m432.734375 112.464844c-53.742187 0-97.464844-43.722656-97.464844-97.464844 0-8.285156-6.71875-15-15-15h-80.335937c-8.285156 0-15 6.714844-15 15v329.367188c0 31.59375-25.703125 57.296874-57.300782 57.296874-31.59375 0-57.296874-25.703124-57.296874-57.296874 0-31.597657 25.703124-57.300782 57.296874-57.300782 8.285157 0 15-6.714844 15-15v-80.335937c0-8.28125-6.714843-15-15-15-92.433593 0-167.632812 75.203125-167.632812 167.636719 0 92.433593 75.199219 167.632812 167.632812 167.632812 92.433594 0 167.636719-75.199219 167.636719-167.632812v-145.792969c29.855469 15.917969 63.074219 24.226562 97.464844 24.226562 8.285156 0 15-6.714843 15-15v-80.335937c0-8.28125-6.714844-15-15-15zm-15 79.714844c-32.023437-2.664063-62.433594-13.851563-88.707031-32.75-4.566406-3.289063-10.589844-3.742188-15.601563-1.171876-5.007812 2.5625-8.15625 7.71875-8.15625 13.347657v172.761719c0 75.890624-61.746093 137.632812-137.636719 137.632812-75.890624 0-137.632812-61.742188-137.632812-137.632812 0-70.824219 53.773438-129.328126 122.632812-136.824219v50.8125c-41.015624 7.132812-72.296874 42.984375-72.296874 86.011719 0 48.136718 39.160156 87.300781 87.296874 87.300781 48.140626 0 87.300782-39.164063 87.300782-87.300781v-314.367188h51.210937c6.871094 58.320312 53.269531 104.71875 111.589844 111.589844zm0 0"
                  ></path>
                </svg>
                <span class="sr-only">Tiktok</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- habit tracker -->
    <section class="py-16 bg-tertiary dark:bg-gray-800">
      <div class="max-w-screen-xl mx-auto px-4">
        <div class="mb-12 text-center">
          <h2 class="text-3xl font-bold text-dark dark:text-white mb-4">Habit Tracker</h2>
          <p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Pantau dan kembangkan kebiasaan baik Anda setiap hari. Visualisasi progres dengan diagram dan kalender interaktif.</p>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 gap-6">
          <!-- Habit List -->
          <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md md:col-span-5">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-xl font-semibold text-dark dark:text-white">Daftar Kebiasaan</h3>
              <button
                id="tambah-kebiasaan-btn"
                class="bg-primary hover:bg-blue-600 text-white px-3 py-1 rounded-md flex items-center text-sm"
              >
                <svg
                  class="w-4 h-4 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                Tambah
              </button>
            </div>

            <div
              class="space-y-3"
              id="habit-list-container"
            >
              <!-- Habit Items akan ditampilkan di sini -->
            </div>
          </div>

          <!-- Chart Row: Bar Chart & Pie Chart -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Progress Diagram (Bar Chart) -->
            <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md max-w-2xl w-full mx-auto">
              <h3 class="text-xl font-semibold text-dark dark:text-white mb-4">Progres Mingguan</h3>
              <div class="flex items-center justify-between mb-4">
                <select class="bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-md px-3 py-1">
                  <option>7 Hari Terakhir</option>
                  <option>30 Hari Terakhir</option>
                  <option>3 Bulan Terakhir</option>
                </select>
                <button class="text-primary dark:text-blue-400 font-medium flex items-center">
                  <svg
                    class="w-4 h-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                    ></path>
                  </svg>
                  Ekspor Data
                </button>
              </div>

              <div class="relative h-64">
                <!-- Grid lines container -->
                <div class="absolute inset-0 flex flex-col justify-between px-8 py-6 pointer-events-none">
                  <div class="w-full border-t border-gray-200 dark:border-gray-700">
                    <span class="absolute -left-4 -mt-2.5 text-xs text-gray-500 dark:text-gray-400">100%</span>
                  </div>
                  <div class="w-full border-t border-gray-200 dark:border-gray-700">
                    <span class="absolute -left-4 -mt-2.5 text-xs text-gray-500 dark:text-gray-400">75%</span>
                  </div>
                  <div class="w-full border-t border-gray-200 dark:border-gray-700">
                    <span class="absolute -left-4 -mt-2.5 text-xs text-gray-500 dark:text-gray-400">50%</span>
                  </div>
                  <div class="w-full border-t border-gray-200 dark:border-gray-700">
                    <span class="absolute -left-4 -mt-2.5 text-xs text-gray-500 dark:text-gray-400">25%</span>
                  </div>
                  <div class="w-full border-t border-gray-200 dark:border-gray-700">
                    <span class="absolute -left-4 -mt-2.5 text-xs text-gray-500 dark:text-gray-400">0%</span>
                  </div>
                </div>
                <!-- Chart bars container -->
                <div class="absolute inset-0 px-12 py-6">
                  <div
                    id="chart-bars"
                    class="relative w-full h-full"
                  ></div>
                </div>
              </div>
            </div>
            <!-- Pie Chart -->
            <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md max-w-xl w-full mx-auto flex flex-col justify-center">
              <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 md:col-span-1">
                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Kebiasaan Terselesaikan</h4>
                <div class="flex items-center justify-center">
                  <!-- Mockup Circle Chart -->
                  <div class="relative h-32 w-32">
                    <svg
                      viewBox="0 0 36 36"
                      class="w-full h-full"
                    >
                      <path
                        class="stroke-current text-gray-200 dark:text-gray-700"
                        stroke-width="3.8"
                        fill="none"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                      />
                      <path
                        class="stroke-current text-primary"
                        stroke-width="3.8"
                        stroke-linecap="round"
                        fill="none"
                        stroke-dasharray="60, 100"
                        d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                      />
                      <text
                        x="18"
                        y="20.5"
                        text-anchor="middle"
                        class="text-sm font-semibold fill-current text-gray-800 dark:text-white"
                      >
                        60%
                      </text>
                    </svg>
                  </div>
                </div>
              </div>

              <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 mt-6 md:mt-0 md:col-span-2">
                <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Waktu Fokus Mingguan</h4>
                <div class="flex items-center justify-between flex-wrap">
                  <div class="w-full md:w-auto mb-3 md:mb-0">
                    <div class="text-2xl font-bold text-gray-800 dark:text-white">12.5 jam</div>
                    <div class="text-sm text-gray-500 dark:text-gray-400">dari target 20 jam</div>
                  </div>
                  <div class="w-full md:w-1/2 bg-gray-200 dark:bg-gray-700 rounded-full h-4">
                    <div
                      class="bg-primary h-4 rounded-full"
                      style="width: 62.5%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendar -->
        <div class="mt-8 bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold text-dark dark:text-white">Kalender Kebiasaan</h3>
            <div class="flex space-x-2">
              <button class="text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 p-1 rounded">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  ></path>
                </svg>
              </button>
              <span class="text-gray-600 dark:text-gray-300 flex items-center">November 2023</span>
              <button class="text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 p-1 rounded">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  ></path>
                </svg>
              </button>
            </div>
          </div>

          <!-- Calendar Grid -->
          <div class="grid grid-cols-7 gap-1 text-center mb-2">
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Min</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Sen</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Sel</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Rab</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Kam</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Jum</div>
            <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Sab</div>
          </div>

          <div class="grid grid-cols-7 gap-1">
            <!-- Week 1 -->
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-400">29</div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-400">30</div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-400">31</div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">1</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-secondary mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">2</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-accent mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">3</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">4</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-secondary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-accent mx-0.5"></div>
              </div>
            </div>

            <!-- Week 2 -->
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">5</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">6</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-secondary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">7</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">8</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-accent mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">9</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md bg-primary bg-opacity-10 dark:bg-opacity-20">
              <div class="text-sm text-gray-700 dark:text-gray-300">10</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-primary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-secondary mx-0.5"></div>
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">11</div>
              <div class="flex mt-1">
                <div class="w-2 h-2 rounded-full bg-purple-500 mx-0.5"></div>
              </div>
            </div>

            <!-- Additional weeks -->
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">12</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">13</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">14</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">15</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">16</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">17</div>
            </div>
            <div class="h-16 p-1 border border-gray-200 dark:border-gray-700 rounded-md">
              <div class="text-sm text-gray-700 dark:text-gray-300">18</div>
            </div>
          </div>

          <!-- Legend -->
          <div class="mt-4 flex flex-wrap gap-4">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-primary mr-2"></div>
              <span class="text-sm text-gray-600 dark:text-gray-400">Meditasi Pagi</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-secondary mr-2"></div>
              <span class="text-sm text-gray-600 dark:text-gray-400">Olahraga</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-accent mr-2"></div>
              <span class="text-sm text-gray-600 dark:text-gray-400">Membaca</span>
            </div>
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full bg-purple-500 mr-2"></div>
              <span class="text-sm text-gray-600 dark:text-gray-400">Belajar Coding</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="bg-white rounded-lg shadow-lg m-4 dark:bg-gray-800">
      <div class="w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between">
        <span class="text-sm text-gray-500 sm:text-center dark:text-gray-400"
          >© 2025
          <a
            href="https://flowbite.com/"
            class="hover:underline"
            >Motivato™</a
          >. All Rights Reserved.
        </span>
        <ul class="flex flex-wrap items-center mt-3 text-sm font-medium text-gray-500 dark:text-gray-400 sm:mt-0">
          <li>
            <a
              href="#about"
              class="hover:underline me-4 md:me-6"
              >About</a
            >
          </li>

          <li>
            <a
              href="#"
              class="hover:underline me-4 md:me-6"
              >Komunitas</a
            >
          </li>
          <li>
            <a
              href="#"
              class="hover:underline"
              >Notifikasi</a
            >
          </li>
        </ul>
      </div>
    </footer>

    <script>
      const hambugerMenu = document.getElementById('hamburger-menu');
      const menu = document.getElementById('navbar-language');

      hambugerMenu.addEventListener('click', function () {
        event.stopPropagation();
        menu.classList.toggle('hidden');
      });

      document.addEventListener('click', function () {
        if (!hambugerMenu.contains(event.target) && !menu.contains(event.target)) {
          menu.classList.add('hidden');
        }
      });
    </script>

    <script>
      // Simple language selector implementation
      document.addEventListener('DOMContentLoaded', function () {
        const selector = document.getElementById('language-selector');
        const menu = document.getElementById('language-menu');
        const displayText = document.getElementById('selected-lang-text');
        const displayIcon = document.getElementById('selected-lang-icon');
        const options = document.querySelectorAll('#language-menu button');

        // Initialize with saved preference or default
        const savedLang = localStorage.getItem('site-language') || 'id';
        setLanguageDisplay(savedLang);

        function setLanguageDisplay(lang) {
          if (lang === 'en') {
            displayText.textContent = 'English (US)';
            displayIcon.innerHTML = `<g fill-rule="evenodd"><g stroke-width="1pt"><path fill="#bd3d44" d="M0 0h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0z" transform="scale(3.9385)"/><path fill="#fff" d="M0 10h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0zm0 20h247v10H0z" transform="scale(3.9385)"/></g><path fill="#192f5d" d="M0 0h98.8v70H0z" transform="scale(3.9385)"/><path fill="#fff" d="M8.2 3l1 2.8H12L9.7 7.5l.9 2.7-2.4-1.7L6 10.2l.9-2.7-2.4-1.7h3zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.5 0l.9 2.8H45l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.4 0l1 2.8h2.8l-2.3 1.7.9 2.7-2.4-1.7-2.3 1.7.9-2.7-2.4-1.7h3zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.5 0l.9 2.8h2.9l-2.4 1.7 1 2.7-2.4-1.7-2.4 1.7 1-2.7-2.4-1.7h2.9zm16.4 0l1 2.8H86l-2.3 1.7.9 2.7-2.4-1.7-2.3 1.7.9-2.7-2.4-1.7h3z" transform="scale(3.9385)"/></g>`;
          } else {
            displayText.textContent = 'Bahasa Indonesia';
            displayIcon.innerHTML = `<path fill="#fff" d="M0 0h512v512H0z"/><path fill="#f00" d="M0 0h512v256H0z"/>`;
          }
        }

        // Toggle menu on button click
        selector.addEventListener('click', function (e) {
          e.stopPropagation();
          menu.classList.toggle('hidden');
        });

        // Close when clicking elsewhere
        document.addEventListener('click', function (e) {
          if (!selector.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.add('hidden');
          }
        });

        // Handle language selection
        options.forEach((option) => {
          option.addEventListener('click', function () {
            const lang = this.getAttribute('data-lang');
            localStorage.setItem('site-language', lang);
            setLanguageDisplay(lang);
            menu.classList.add('hidden');
          });
        });
      });
    </script>

    <script>
      const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
      const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

      // Change the icons inside the button based on previous settings
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        themeToggleLightIcon.classList.remove('hidden');
      } else {
        themeToggleDarkIcon.classList.remove('hidden');
      }

      const themeToggleBtn = document.getElementById('theme-toggle');

      themeToggleBtn.addEventListener('click', function () {
        // toggle icons inside button
        themeToggleDarkIcon.classList.toggle('hidden');
        themeToggleLightIcon.classList.toggle('hidden');

        // if set via local storage previously
        if (localStorage.getItem('color-theme')) {
          if (localStorage.getItem('color-theme') === 'light') {
            document.documentElement.classList.add('dark');
            localStorage.setItem('color-theme', 'dark');
          } else {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('color-theme', 'light');
          }
        } else {
          // if NOT set via local storage previously
          if (document.documentElement.classList.contains('dark')) {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('color-theme', 'light');
          } else {
            document.documentElement.classList.add('dark');
            localStorage.setItem('color-theme', 'dark');
          }
        }

        // Tambahkan log untuk debugging
        console.log('Dark mode toggled');
        console.log('Current class list:', document.documentElement.classList);
      });
    </script>

    <!-- Core JS -->
    <script>
      // Inisialisasi data
      let habitData = {
        habits: [],
      };

      // Fungsi untuk menyimpan data
      function saveHabitData() {
        localStorage.setItem('habitData', JSON.stringify(habitData));
        updateStats();
        updateWeeklyChart();
        updatePieChart();
        renderHabitList();
      }

      // Fungsi untuk memuat data
      function loadHabitData() {
        const savedData = localStorage.getItem('habitData');
        if (savedData) {
          habitData = JSON.parse(savedData);

          habitData.habits.forEach((habit) => {
            if (!habit.selectedDays) {
              // fallback: anggap semua hari aktif jika tidak ada selectedDays
              habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
              habit.days = Array(7).fill(false);
              habit.targetDays = 7;
            }
            if (!habit.days || habit.days.length !== habit.selectedDays.length) {
              habit.days = Array(habit.selectedDays.length).fill(false);
            }
          });
          renderHabitList();
          updateStats();
          updateWeeklyChart();
          updatePieChart();
        }
      }

      // Fungsi untuk render daftar kebiasaan dengan checkbox harian
      function renderHabitList() {
        const container = document.getElementById('habit-list-container');
        if (!container) return;

        container.innerHTML = '';

        if (!habitData.habits || habitData.habits.length === 0) {
          container.innerHTML = `
      <div class="text-center py-8 text-gray-500 dark:text-gray-400">
        Belum ada kebiasaan. Klik tombol "Tambah" untuk mulai mencatat kebiasaan Anda.
      </div>
    `;
          return;
        }

        const daysOfWeek = ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'];

        habitData.habits.forEach((habit) => {
          if (!habit.selectedDays) {
            habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
            habit.days = Array(7).fill(false);
            habit.targetDays = 7;
          }
          const habitElement = document.createElement('div');
          habitElement.className = 'bg-gray-50 dark:bg-gray-800 rounded-lg p-4 flex flex-col gap-4 mb-3';

          // Main habit info
          const habitInfo = document.createElement('div');
          habitInfo.className = 'flex items-center justify-between';

          // Left side with name and progress
          const leftSide = document.createElement('div');
          leftSide.className = 'flex items-center gap-3 flex-1';
          leftSide.innerHTML = `
            <div>
              <h4 class="font-medium text-gray-900 dark:text-white">${habit.name}</h4>
              <p class="text-sm text-gray-500 dark:text-gray-400">${habit.completedDays}/${habit.targetDays} hari</p>
            </div>
          `;

          // Right side with progress bar and delete button
          const rightSide = document.createElement('div');
          rightSide.className = 'flex items-center gap-4';
          rightSide.innerHTML = `
            <div class="w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2">
              <div class="${habit.color} h-2 rounded-full transition-all duration-300" 
                   style="width: ${(habit.completedDays / habit.targetDays) * 100}%">
              </div>
            </div>
            <button onclick="deleteHabit(${habit.id})"
                    class="text-red-600 hover:text-red-700 dark:text-red-500 dark:hover:text-red-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
            </button>
          `;

          habitInfo.appendChild(leftSide);
          habitInfo.appendChild(rightSide);
          habitElement.appendChild(habitInfo);

          // Daily checkboxes hanya untuk hari yang dipilih
          const checkboxesContainer = document.createElement('div');
          checkboxesContainer.className = `grid grid-cols-${habit.targetDays} gap-2`;

          habit.selectedDays.forEach((dayIdx, i) => {
            const isChecked = habit.days[i];
            const dayContainer = document.createElement('div');
            dayContainer.className = 'flex flex-col items-center';

            const checkbox = document.createElement('div');
            checkbox.className = `
              w-8 h-8 flex items-center justify-center rounded-lg cursor-pointer 
              ${isChecked ? habit.color + ' text-white' : 'bg-gray-100 dark:bg-gray-700'}
              hover:opacity-80 transition-all duration-200
            `;
            checkbox.onclick = () => toggleHabitCompletion(habit.id, i);
            checkbox.innerHTML = isChecked ? '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>' : '';

            const dayLabel = document.createElement('span');
            dayLabel.className = 'text-xs text-gray-500 dark:text-white mt-1';
            dayLabel.textContent = daysOfWeek[dayIdx];

            dayContainer.appendChild(checkbox);
            dayContainer.appendChild(dayLabel);
            checkboxesContainer.appendChild(dayContainer);
          });

          habitElement.appendChild(checkboxesContainer);
          container.appendChild(habitElement);
        });

        // Update diagrams after rendering
        updateStats();
        updateWeeklyChart();
        updatePieChart();
      }
    </script>

    <script>
      // Function to handle habit deletion
      function deleteHabit(habitId) {
        const habitToDelete = habitData.habits.find((h) => h.id === habitId);
        if (!habitToDelete) return;

        const index = habitData.habits.indexOf(habitToDelete);
        habitData.habits.splice(index, 1);
        saveHabitData();
        renderHabitList();
      }

      // Load data when page loads
      document.addEventListener('DOMContentLoaded', function () {
        loadHabitData();
        renderHabitList();
      });
    </script>

    <script>
      // Function to toggle habit completion status
      function toggleHabitCompletion(habitId, dayIndex) {
        const habit = habitData.habits.find((h) => h.id === habitId);
        if (!habit) return;

        // Toggle completion status
        if (!habit.days) {
          habit.days = Array(7).fill(false);
        }

        habit.days[dayIndex] = !habit.days[dayIndex];

        // Update completedDays count
        habit.completedDays = habit.days.filter((day) => day === true).length;

        // Save changes and update UI
        saveHabitData();
        renderHabitList();
        updateWeeklyProgress();
      }
    </script>

    <!-- Modal Tambah Kebiasaan -->
    <div
      id="tambah-kebiasaan-modal"
      class="fixed inset-0 z-[60] hidden"
      aria-hidden="true"
    >
      <div
        class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity"
        id="modal-backdrop"
      ></div>
      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
          <div class="relative transform overflow-hidden rounded-lg bg-white dark:bg-gray-800 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md p-6">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-medium text-gray-900 dark:text-white">Tambah Kebiasaan Baru</h3>
              <button
                id="close-modal"
                type="button"
                class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-700 dark:hover:text-white"
              >
                <svg
                  class="w-5 h-5"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </button>
            </div>
            <form id="tambah-kebiasaan-form">
              <div class="mb-4">
                <label
                  for="habit-name"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Nama Kebiasaan</label
                >
                <input
                  type="text"
                  id="habit-name"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
                  placeholder="Contoh: Berolahraga"
                  required
                />
              </div>
              <div class="mb-4">
                <label
                  for="habit-target"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Target Hari Dalam Seminggu</label
                >
                <input
                  type="number"
                  id="habit-target"
                  min="1"
                  max="7"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white"
                  placeholder="1-7"
                  required
                />
              </div>
              <div class="mb-4">
                <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Pilih Hari</label>
                <div class="flex flex-wrap gap-2">
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="0"
                      class="mr-1"
                    />Sen</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="1"
                      class="mr-1"
                    />Sel</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="2"
                      class="mr-1"
                    />Rab</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="3"
                      class="mr-1"
                    />Kam</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="4"
                      class="mr-1"
                    />Jum</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="5"
                      class="mr-1"
                    />Sab</label
                  >
                  <label
                    ><input
                      type="checkbox"
                      name="habit-days"
                      value="6"
                      class="mr-1"
                    />Min</label
                  >
                </div>
              </div>
              <div class="mb-4">
                <label
                  for="habit-color"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Warna</label
                >
                <div class="flex space-x-2">
                  <label class="cursor-pointer">
                    <input
                      type="radio"
                      name="habit-color"
                      value="bg-primary"
                      class="sr-only"
                      checked
                    />
                    <div class="w-6 h-6 bg-primary rounded-full border-2 border-transparent hover:border-gray-300"></div>
                  </label>
                  <label class="cursor-pointer">
                    <input
                      type="radio"
                      name="habit-color"
                      value="bg-secondary"
                      class="sr-only"
                    />
                    <div class="w-6 h-6 bg-secondary rounded-full border-2 border-transparent hover:border-gray-300"></div>
                  </label>
                  <label class="cursor-pointer">
                    <input
                      type="radio"
                      name="habit-color"
                      value="bg-accent"
                      class="sr-only"
                    />
                    <div class="w-6 h-6 bg-accent rounded-full border-2 border-transparent hover:border-gray-300"></div>
                  </label>
                  <label class="cursor-pointer">
                    <input
                      type="radio"
                      name="habit-color"
                      value="bg-purple-500"
                      class="sr-only"
                    />
                    <div class="w-6 h-6 bg-purple-500 rounded-full border-2 border-transparent hover:border-gray-300"></div>
                  </label>
                  <label class="cursor-pointer">
                    <input
                      type="radio"
                      name="habit-color"
                      value="bg-green-500"
                      class="sr-only"
                    />
                    <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-transparent hover:border-gray-300"></div>
                  </label>
                </div>
              </div>
              <button
                type="submit"
                class="w-full text-white bg-primary hover:bg-blue-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary dark:hover:bg-blue-600 dark:focus:ring-blue-800"
              >
                Tambah Kebiasaan
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Konfirmasi Hapus -->
    <div
      id="konfirmasi-hapus-modal"
      class="fixed inset-0 z-50 opacity-0 pointer-events-none"
    >
      <div
        class="absolute inset-0 backdrop-blur-xl bg-white/30 dark:bg-gray-900/30 backdrop-saturate-150 backdrop-brightness-110"
        id="konfirmasi-backdrop"
      ></div>
      <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md relative z-10">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-medium text-gray-900 dark:text-white">Konfirmasi Penghapusan</h3>
            <button
              id="close-konfirmasi"
              class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-700 dark:hover:text-white"
            >
              <svg
                class="w-5 h-5"
                fill="currentColor"
                viewBox="0 0 20 20"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </button>
          </div>
          <p class="text-gray-700 dark:text-gray-300 mb-6">Apakah Anda yakin ingin menghapus kebiasaan ini?</p>
          <div class="flex justify-end space-x-3">
            <button
              id="batal-hapus"
              class="px-4 py-2 text-sm font-medium text-gray-500 bg-gray-100 rounded-lg border border-gray-200 hover:bg-gray-200 focus:z-10 focus:ring-2 focus:ring-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:bg-gray-600"
            >
              Batal
            </button>
            <button
              id="konfirmasi-hapus"
              class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:z-10 focus:ring-2 focus:ring-red-300 dark:bg-red-500 dark:hover:bg-red-600"
            >
              Hapus
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats and Charts JS -->
    <script>
      // Fungsi untuk memperbarui statistik
      function updateStats() {
        const totalHabits = habitData.habits.length;
        let totalCompleted = 0;
        let totalTarget = 0;

        habitData.habits.forEach((habit) => {
          if (!habit.selectedDays) {
            habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
            habit.days = Array(7).fill(false);
            habit.targetDays = 7;
          }
          totalCompleted += habit.completedDays;
          totalTarget += habit.targetDays;
        });

        const overallCompletion = totalTarget > 0 ? Math.round((totalCompleted / totalTarget) * 100) : 0;

        // Update pie chart completion percentage
        const pieChartPath = document.querySelector('svg path.text-primary');
        if (pieChartPath) {
          pieChartPath.setAttribute('stroke-dasharray', `${overallCompletion}, 100`);
        }

        // Update completion percentage text
        const completionText = document.querySelector('svg text');
        if (completionText) {
          completionText.textContent = `${overallCompletion}%`;
        }
      }

      // Fungsi untuk memperbarui diagram batang mingguan
      function updateWeeklyChart() {
        const chartContainer = document.getElementById('chart-bars');
        if (!chartContainer) return;

        chartContainer.innerHTML = '';
        const dayLabels = ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'];

        const dailyProgress = Array(7).fill(0);
        const dailyTargets = Array(7).fill(0);

        habitData.habits.forEach((habit) => {
          if (!habit.selectedDays) {
            habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
            habit.days = Array(7).fill(false);
            habit.targetDays = 7;
          }
          for (let i = 0; i < 7; i++) {
            dailyTargets[i]++;
            if (habit.days[i] === true) {
              dailyProgress[i]++;
            }
          }
        });

        // Container untuk batang-batang dengan full height
        const barsContainer = document.createElement('div');
        barsContainer.className = 'flex justify-between items-end w-full h-full';
        chartContainer.appendChild(barsContainer);

        // Buat batang untuk setiap hari
        for (let i = 0; i < 7; i++) {
          const progress = dailyTargets[i] > 0 ? Math.round((dailyProgress[i] / dailyTargets[i]) * 100) : 0;

          const barContainer = document.createElement('div');
          barContainer.className = 'flex flex-col items-center relative h-full';
          barContainer.style.width = '12%';

          // Container untuk batang target dan progress
          const barsWrapper = document.createElement('div');
          barsWrapper.className = 'relative w-8 h-full';

          // Batang target (latar belakang)
          const targetBar = document.createElement('div');
          targetBar.className = 'absolute inset-0 border border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 bg-opacity-30 rounded-t-md';

          // Batang progress mulai dari bawah
          const progressBar = document.createElement('div');
          progressBar.className = 'absolute bottom-0 inset-x-0 bg-primary rounded-t-md transition-all duration-300';
          progressBar.style.height = `${progress}%`;

          // Label persentase
          const percentLabel = document.createElement('div');
          percentLabel.className = 'absolute -top-6 text-xs font-medium text-gray-600 dark:text-gray-300';
          percentLabel.textContent = `${progress}%`;

          // Label hari
          const dayLabel = document.createElement('div');
          dayLabel.className = 'absolute -bottom-6 text-xs text-gray-600 dark:text-gray-400';
          dayLabel.textContent = dayLabels[i];

          barsWrapper.appendChild(targetBar);
          barsWrapper.appendChild(progressBar);
          barContainer.appendChild(percentLabel);
          barContainer.appendChild(barsWrapper);
          barContainer.appendChild(dayLabel);

          barsContainer.appendChild(barContainer);
        }
      }

      // Fungsi untuk memperbarui pie chart
      function updatePieChart() {
        let totalCompleted = 0;
        let totalTarget = 0;

        habitData.habits.forEach((habit) => {
          if (!habit.selectedDays) {
            habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
            habit.days = Array(7).fill(false);
            habit.targetDays = 7;
          }

          totalCompleted += habit.completedDays;
          totalTarget += habit.targetDays;
        });

        const completionPercentage = totalTarget > 0 ? Math.round((totalCompleted / totalTarget) * 100) : 0;

        // Update weekly focus time
        const weeklyFocus = document.querySelector('.text-2xl.font-bold');
        if (weeklyFocus) {
          const hoursCompleted = (totalCompleted * 24) / 7; // Asumsi rata-rata 24 jam per minggu
          weeklyFocus.textContent = `${hoursCompleted.toFixed(1)} jam`;
        }

        // Update progress bar
        const progressBar = document.querySelector('.bg-primary.h-4');
        if (progressBar) {
          progressBar.style.width = `${completionPercentage}%`;
        }
      }
    </script>

    <script>
      // Fungsi untuk toggle status penyelesaian kebiasaan
      function toggleHabitCompletion(habitId, dayIndex) {
        const habit = habitData.habits.find((h) => h.id === habitId);
        if (!habit) return;

        // Toggle status penyelesaian
        if (habit.days[dayIndex] === true) {
          habit.days[dayIndex] = false;
          habit.completedDays--;
        } else {
          habit.days[dayIndex] = true;
          habit.completedDays++;
        }

        // Simpan perubahan
        saveHabitData();
      }
    </script>

    <script>
      // Function to create a new habit
      function createHabit(name, targetDays, color, selectedDays) {
        const habit = {
          id: Date.now(), // Use timestamp as unique ID
          name,
          targetDays,
          completedDays: 0,
          color,
          selectedDays,
          days: Array(selectedDays.length).fill(false), // Initialize array for each day of the week
        };

        habitData.habits.push(habit);
        saveHabitData();
      }

      // Function to update weekly progress
      function updateWeeklyProgress() {
        const chartBars = document.getElementById('chart-bars');
        if (!chartBars) return;

        let weeklyData = Array(7)
          .fill(0)
          .map(() => ({
            completed: 0,
            total: 0,
          }));

        habitData.habits.forEach((habit) => {
          if (!habit.selectedDays) {
            habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
            habit.days = Array(7).fill(false);
            habit.targetDays = 7;
          }
          habit.days.forEach((isCompleted, dayIndex) => {
            if (isCompleted) {
              weeklyData[dayIndex].completed++;
            }
            weeklyData[dayIndex].total++;
          });
        });

        // Update chart UI
        updateWeeklyChart();
        updatePieChart();
      }

      // Event listener for the add habit form
      document.getElementById('tambah-kebiasaan-form')?.addEventListener('submit', function (e) {
        e.preventDefault();

        const name = document.getElementById('habit-name').value;
        const colorInput = document.querySelector('input[name="habit-color"]:checked');
        const color = colorInput ? colorInput.value : 'bg-primary';

        // ambil hari terpilih
        const dayCheckboxes = document.querySelectorAll('input[name="habit-days"]:checked');
        const selectedDays = Array.from(dayCheckboxes).map((cb) => parseInt(cb.value));
        const targetDays = selectedDays.length;

        if (targetDays === 0) {
          alert('Pilih minimal satu hari!');
          return;
        }

        createHabit(name, targetDays, color, selectedDays);

        // Close modal and reset form
        const modal = document.getElementById('tambah-kebiasaan-modal');
        modal.classList.add('hidden');
        this.reset();
      });
    </script>

    <script>
      // Function to delete habit
      function deleteHabit(habitId) {
        const index = habitData.habits.findIndex((h) => h.id === habitId);
        if (index !== -1) {
          habitData.habits.splice(index, 1);
          saveHabitData();
        }
      }

      // Function to update stats and charts
      function updateStats() {
        const totalCompleted = habitData.habits.reduce((sum, habit) => sum + habit.completedDays, 0);
        const totalTarget = habitData.habits.reduce((sum, habit) => sum + habit.targetDays, 0);
        const completionPercentage = totalTarget > 0 ? Math.round((totalCompleted / totalTarget) * 100) : 0;

        // Update completion percentage in the pie chart
        const pieChartPath = document.querySelector('svg path.stroke-current.text-primary');
        if (pieChartPath) {
          pieChartPath.setAttribute('stroke-dasharray', `${completionPercentage}, 100`);
        }
        const pieChartText = document.querySelector('svg text');
        if (pieChartText) {
          pieChartText.textContent = `${completionPercentage}%`;
        }
      }

      // Function to initialize the app
      function initializeApp() {
        const modal = document.getElementById('tambah-kebiasaan-modal');
        const openModalBtn = document.getElementById('tambah-kebiasaan-btn');
        const closeModalBtn = document.getElementById('close-modal');
        const modalBackdrop = document.getElementById('modal-backdrop');

        // Modal controls
        openModalBtn?.addEventListener('click', () => modal.classList.remove('hidden'));
        closeModalBtn?.addEventListener('click', () => modal.classList.add('hidden'));
        modalBackdrop?.addEventListener('click', () => modal.classList.add('hidden'));

        // Load saved data
        loadHabitData();
      }

      // Initialize app when DOM is loaded
      document.addEventListener('DOMContentLoaded', initializeApp);
    </script>

    <script>
      // Fungsi untuk memperbarui data habit completion dan menyimpannya
      function updateHabitCompletion(habitId, dayIndex) {
        const habit = habitData.habits.find((h) => h.id === habitId);
        if (!habit) return;

        if (!habit.days) {
          habit.days = Array(7).fill(false);
        }

        // Toggle completion status
        habit.days[dayIndex] = !habit.days[dayIndex];

        // Update completedDays count based on checked days
        habit.completedDays = habit.days.filter((day) => day === true).length;

        // Save changes
        saveHabitData();

        // Update UI and charts
        updateWeeklyProgress();
        updateStats();
        updateWeeklyChart();
        updatePieChart();
      }

      // Function to initialize habit tracking
      function initializeHabitTracking() {
        // Load existing data
        const savedData = localStorage.getItem('habitData');
        if (savedData) {
          habitData = JSON.parse(savedData);

          // Ensure all habits have the days array
          habitData.habits.forEach((habit) => {
            if (!habit.selectedDays) {
              habit.selectedDays = [0, 1, 2, 3, 4, 5, 6];
              habit.days = Array(7).fill(false);
              habit.targetDays = 7;
            }

            if (!habit.days) {
              habit.days = Array(7).fill(false);
            }
          });
        }

        renderHabitList();
        updateStats();
        updateWeeklyChart();
        updatePieChart();
      }

      // Initialize habit tracking when DOM loads
      document.addEventListener('DOMContentLoaded', initializeHabitTracking);
    </script>

    <script>
      // Initialize color picker behavior
      document.addEventListener('DOMContentLoaded', function () {
        const colorInputs = document.querySelectorAll('input[name="habit-color"]');
        const colorLabels = document.querySelectorAll('input[name="habit-color"] + div');

        colorInputs.forEach((input, index) => {
          input.addEventListener('change', function () {
            // Remove border from all labels
            colorLabels.forEach((label) => {
              label.classList.remove('border-gray-900', 'dark:border-white');
              label.classList.add('border-transparent');
            });

            // Add border to selected label
            if (this.checked) {
              colorLabels[index].classList.remove('border-transparent');
              colorLabels[index].classList.add('border-gray-900', 'dark:border-white');
            }
          });

          // Initialize selected state
          if (input.checked) {
            colorLabels[index].classList.remove('border-transparent');
            colorLabels[index].classList.add('border-gray-900', 'dark:border-white');
          }
        });
      });
    </script>
  </body>
</html>
